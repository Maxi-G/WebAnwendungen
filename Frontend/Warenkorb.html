<html>

<head>
    <title>The Ebook Hub</title>
    <link rel="stylesheet" href="CSS/warenkorb_stylesheet.css" />
    <link rel="stylesheet" href="CSS/warenkorb.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <meta charset="UTF-8" />
    <script src="JS/sessionHandling.js"></script>
</head>

<body>
    <div id="navigation">
        <div id="titel" class="navElemente">
            <a id="title_font" href="Home.html">The Ebook Hub</a>
        </div>

        <div id="selectNav" class="navElemente">              
                    <a href="Home.html">HOME</a>     
                    <a href="Shop.html">SHOP</a>   
                    <a href="AuthorPageÜbersicht.html">AUTOREN</a>          
                    <a href="Warenkorb.html">
                    <img id="warenkorb" src="sources/Warenkorb.png" alt="Warenkorb">
                    </a>                 
        </div>

        <div id="logo"></div>
    </div>

    <div id="main">
        <div id="warenkorb">
            <h1 style="color: #444048;">Warenkorb</h1>
        </div>
        <div class="Book_container" id="Book_container">
            

            <div class="container_right">
                <h2>Gesamtbetrag:</h2> 
                <p style="color: #FF8A11;">97,96 €</p>
                <p>(inkl. MwSt.)</p>
                <form class="zahlung">
                    <h2>Zahlungsmethode:</h2>
                    <label>
                        <input type="radio" name="art" value="paypal">
                        <img src="sources/PayPal.svg.png" width="80px">
                    </label><br>
                    <!--<label>
                        <input type="radio" name="art" value="maestro">
                        <img src="sources/maestro.png" width="80px">
                    </label><br>
                    <label>
                        <input type="radio" name="art" value="mastercard">
                        <img src="sources/1000px-Mastercard-logo.svg.png" width="80px">
                    </label><br>-->
                </form>
                <h2>Email Adresse:</h2>
                <form class="Email_container">
                    <input type="text" placeholder=" Vorname:" name="search">
                    <input type="text" placeholder=" Nachname:" name="search">
                    <input type="text" placeholder=" Email:" name="search">
                </form>
                <br><br>
                <div><a href="Bestellbestaetigung.html"><button type="button"
                            style="width: 50%;">Bestellen</button></a></div>
            </div>
        </div>
    </div>

    <div id="footer">
            <div id="selectFooter" class="FooterElemente">              
                <a href="Impressum.html">Impressum und Kontakt</a>     
                <a href="Datenschutzerklärung.html">Datenschutz</a>   
                <a href="Widerrufsrecht.html">Widerrufsrecht</a>     
            </div>
            <div id="copyright"></div>
    </div>


    <script>
        $(async () => {
            await loadBasket();			
        });

        async function loadBasket() {
            let books = getSessionItem("id").split(',');
            //Duplikate entfernen
            books = new Set(books);
            books = Array.from(books)
            console.log(books)
            for (let i=0; i<books.length; i++) {
                let response = await fetch("http://localhost:8000/web2/buch/gib/" + books[i]);
                let json_books = await response.json()
                await ajaxToHTML(json_books.daten);
                console.log("finish")
            }
        }

        function ajaxToHTML(json_book) {
            console.log(json_book)
            tmp="<div class=\"author_buble\">";
            tmp+="<div class=\"inside_buble_container\">";
            tmp+="<span class=\"Author_attribute\">" + json_book.titel + "</span>";
            tmp+="</div>";
            tmp+="<div class=\"inside_buble_container\">";
            tmp+="<span class=\"Author_attribute\">" + json_book.autor_name + "</span>";
            tmp+="</div>";
            tmp+="<div class=\"inside_buble_container\">";
            tmp+="<span class=\"Author_attribute\">" + json_book.genre + "</span>";
            tmp+="</div>";
            tmp+="<div class=\"inside_buble_container\">";
            tmp+="<span class=\"Author_attribute\" style=\"color: #FF8A11;\">" + json_book.preis + "&euro;</span>";
            tmp+="</div>";
            tmp+="</div>";
            $("#Book_container").append(tmp);
        }
    </script>
</body>

</html>